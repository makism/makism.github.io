<!DOCTYPE html>
<html lang="en-US">
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">


<meta name="keywords" content="phd,brain connectivity,fmri,graphs,graph theory,python,c&#43;&#43;,qt">

<base href="/">

<title>Avraam Marimpis</title>

<meta name="generator" content="Hugo 0.59.1" />



<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400|Roboto+Slab:400,700|Roboto:300,300i,400,400i,500,500i,700,700i">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css">
<link rel="stylesheet" href="https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css">
<link rel="stylesheet" href="/css/main.css">








<link rel="manifest" href="/manifest.json">

<meta name="theme-color" content="#ffffff">

</head>
<body lang="en-US">
<div class="container">


<header class="row text-left title">
  <h1 class="title">Mothership</h1>
</header>
<section id="category-pane" class="row meta">
  
</section>
<section id="content-pane" class="row">
  <div class="col-md-12 text-justify content">
    

<p>&ldquo;Mothership&rdquo; is the temporary internal codename for the project that I lead in Brain Innovation.</p>

<p>The motivation behind the project is that we want to exploit our own cluster (and in the future, cloud) infrastrure in order to execute in parallel, small jobs. These jobs are small executable units extracted from BrainVoyager and are developed for a specific domain, i.e. <code>anatomical preprocessing</code>, <code>functional connectivity</code>, etc.</p>

<p>Thre are multiple layers in the project, the ones that I am in charge of to proposing, developing and maintaining are:</p>

<ol>
<li>REST-API</li>
<li>A crossplatform client</li>
<li>Infrastructure</li>
<li>Development and Deployment</li>
</ol>

<h3 id="rest-api">REST-API</h3>

<p>The API is developed in Flask and Flask-RESTful and served over Gunicorn. The development of the api comforts <a href="https://swagger.io/">OpenAPI 3.0 and Swagger</a>, with <a href="https://swagger.io/tools/swagger-ui/">Swagger-UI</a> also being available to explore and quick test the endpoints.</p>

<p>Each endpoint is defined and well-documented in its own module. The requests and responses are modeled using Swagger and when working with json files, there are available schemas for validation.</p>

<p>For example, this is a (truncated snippet) for a request model:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StorageModel</span>(Schema):
    <span style="color:#e6db74">&#34;&#34;&#34;Top-level Storage Model.&#34;&#34;&#34;</span>
    type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;object&#34;</span>
    properties <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;storage&#34;</span>: Storage}
    required <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;storage&#34;</span>]</code></pre></div>

<p>The project has at least two configuration setups, i.e. <code>Production</code> and <code>Testing</code>; that later of which enables specific flags to allows <code>nosetests</code> to execute. I also experimenting with <code>mock</code> tests to emulate for real-world scenarios.</p>

<p>Regarding authentication and security, there is the functionality to provide per user-authentication when calling the API. In regards to User-data, there is a plan to provide each user access to their own, isolated collections in MongoDB.</p>

<h3 id="infrastructure-and-deployment">Infrastructure and Deployment</h3>

<p>The backend of the infrastracture is <a href="https://airflow.apache.org/">Apache Airflow</a> and <a href="https://www.mongodb.com/">MongoDB</a>. Airflow is used in a distributed configuration with the main node of our cluster acting as the webserver and scheduler, and the rest of our nodes are workers. In Mongo, we store the transactions of each Workflow, and its important metadata.</p>

<h3 id="development-and-deployment">Development and Deployment</h3>

<p>For the development part, I opted-in used <a href="https://www.vagrantup.com/">Vagrant</a> installations to keep my machines easily maintained. The code is track in a Git repository in our own private <a href="https://www.phacility.com/phabricator/">Phabricator</a> instance.</p>

<p>Regarding the deployment, I built two <a href="https://www.docker.com/">Docker</a> images. One is specific for the main node, and the other one for the workers. <a href="https://www.portainer.io/">Portainer</a> is definitely helpful.</p>

  </div>
</section>
<section id="tag-pane" class="row meta">
  
</section>








<section id="menu-pane" class="row menu text-center">

  <h4 class="text-center"><a class="menu-item" href="/">home</a></h4>
</section>



<footer class="row text-center footer">
  <hr />
  
  <h6 class="text-center copyright">Â© 2020. <a href="http://creativecommons.org/licenses/by/3.0/">Some Rights Reserved</a>.</h6>
  
  
</footer>

</div>






<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'XYZ', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="js/main.js"></script>
</body>
</html>


